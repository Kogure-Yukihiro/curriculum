■TCP

　コネクション型のプロトコル

　高信頼性や通信効率の最適化機能を提供します。

　そのため、UDPと比べて負荷がかかります。

 

■UDP

　コネクションレス型のプロトコル

　TCPに比べると信頼性がないものの、高速に転送を行うことができます。

　このプロトコル自体がパケット到達を保証しないため、パケットがロスした場合を考慮して、

　アプリケーション側で再送処理をして通信を成立させる機能を持たせるか、パケットのロスを容認できるアプリであることが求められます。


■ポート番号

　コンピュータが通信を行うために通信先のアプリケーションを特定するための番号

　ヘッダの中にある上位のアプリケーション層のプロトコルを示す情報のことで、TCPとUDPのヘッダに必ず存在するフィールドとなります。

　ポート番号の取り方によって、ウェルノウンポートとランダムポートに分けられます。

20 TCP FTP-DATA
データ転送用のTCP20番が割り当てられている

21 TCP FTP
　ファイル転送に使用されるプロトコル

　制御用のTCP21番

22 TCP ssh
ネットワークを通じて別の機器を遠隔操作するプロトコル
SHサーバがクライアントからの接続を待ち、コマンド操作を受け付けたり、処理結果を送信する

23 TCP Telnet
ネットワーク上のリモートノードを遠隔操作する時に利用されるプロトコル 

25 TCP SMTP
メールを送信する時に使用されるプロトコル

53 UDP DNS
ドメイン名とIPアドレスを対応させる機能

67,68 UDP DHCP
IPアドレス等のネットワークに接続するために必要な情報を自動的に割り当てるプロトコル
クライアントサーバ型のプロトコルである

69 UDP TFTP
ファイル転送に使用されるプロトコル

FTPに比べると動作が軽く認証機能もない

80 TCP HTTP
webブラウザなどでwebページを表示する時に使用されるプロトコル

110 TCP POP3（Post Office Protocol）
電子メール（eメール）を受信するためのプロトコル

123 UDP NTP
ネットワークを通じて現在時刻を配信するプロトコル
自身の持つ現在時刻のデータを提供する

161 UDP SNMP
IPネットワーク上のルータやスイッチ、サーバ、端末など様々な機器をネットワーク経由で遠隔から監視・制御するためのプロトコル

520 UDP RIP
ダイナミックルーティングの一種
距離と方向を基準に最適ルートを決定する。
メトリック(ルーティングにおいて、最適経路を選択する際に指標となるもの)はホップ数（経由するルータの数）の値が小さい経路が最適ルートとして決定され

②ランダムポート番号：1024番ポート以降
ポート番号1024以降の番号はランダムポートと呼ばれていて、

クライアント側で送信元ポート番号として使用する番号となります。

クライアントは送信を行う際に空いているポート番号からランダムに番号を使用します。

①送信元ポート番号

→　16bit　送信元のポート番号の値。

 

②宛先ポート番号

→　16bit　宛先のポート番号の値。

 

③シーケンス番号

→　32bit　送信したデータの順序を示す値。「相手から受信した確認応答番号」の値。

 

④確認応答番号

→　32bit　確認応答番号の値。「相手から受信したシーケンス番号」＋「データサイズ」。

 

⑤データオフセット

→　 4bit　TCPヘッダの長さの示す値。

 

⑥予約

→　 6bit　全ビット「0」が入る。将来の拡張のために用意されている。

 

⑦コントロールフラグ

→　 6bit　URG, ACK, PSH, SYN, FINの6つのビットで構成されている。

　　　　　これらのビットは「1」の値が入る（フラグを立てる）場合に意味をなす。

 

⑧チェックサム

→　16bit　TCPヘッダとデータ部分のエラーチェックを行うために使用される値が入る。

 

⑨緊急ポインタ

→　16bit　コントロールフラグのURGの値が「1」である場合にのみを使用されるフィールド。

　　　　　 緊急データの開始位置を示す情報が入る。

 

 

--ペイロード情報--

 

①オプション

→　可変長　TCPの通信において、性能を向上させるために利用する。例えば

　　TCPコネクションの際に、MSSを決定するために使用されたりします

②パディング

→　可変長　TCPヘッダの長さを32ビットの整数にするために

　　詰め物として空データの「0」の値を入れることにより調整する。

 ■スリーウェイハンドシェイク

　TCPを使用した通信を行う場合、最初に行われる3方向のメッセージ交換のこと

◆ウェルノウンポート
ここでは、TCPにおける代表的なウェルノウンポートについて説明していきます。

前の項目で図として記述しましたが、その中でも特に必要となるポートについて説明致します。

①Telnet

　番号：TCP23

　ネットワーク上のリモートノードを遠隔操作する時に利用されるプロトコル

②HTTP

　番号：TCP80

　webブラウザなどでwebページを表示する時に使用されるプロトコル

③FTP

　番号：TCP20，21

　ファイル転送に使用されるプロトコル

　制御用のTCP21番とデータ転送用のTCP20番が割り当てられている

④SMTP

　番号：TCP25

　メールを送信する時に使用されるプロトコル

 ◆ウェルノウンポート
TCPと同様、代表的なウェルノウンポートを説明していきます。

①DHCP

　番号：UDP67，68

　　　　クライアントにIPアドレスなどの設定を自動的に行うために使用されるプロトコル

②TFTP

　番号：UDP69

　ファイル転送に使用されるプロトコル

　FTPに比べると動作が軽く認証機能もない

③RIP

　番号：UDP520

　ダイナミックルーティングの一種

■WLAN（Wireless LAN）

　無線LANのこと

　ケーブル配線による制約がなく、電波の届く範囲で自由に利用することができる

①5GHz

　・壁や床等の障害物に弱く、影響を受けやすい

　・WLAN専用の電波であるため、2.4GHz帯と比べて電波干渉が起こりにくく、安定した通信を行うことが可能

 

②2.4GHz

　・周波数が低いため、電波が遠くまで届きやすい

　・壁や床等の障害物に強い

　・WLANだけでなく、キッチン周りの家電やBluetooth等にも使われている周波数なので、電波干渉が起こりやすい

■CSMA/CA（Carrier Sense Multiple Access / Collision Avoidance）

　WLANにおけるコリジョンを回避する通信方式

　ノードがデータを送信する際、送信前にケーブル上でデータが流れていないかを確認してから送信する

　有線と異なり、コリジョン検出する機能は持ち合わせないため、ランダムな時間をあけてからデータを送信する　

①送信前にケーブルの空きを確認

ノードはデータを送信する前に、ケーブル上に信号が流れていないかを確認します。（Carrier Sense：キャリア検知）

ケーブルがふさがっていたらしばらく待ってから再度確認し、ケーブルが空くまでこれを繰り返します。

 

②データを送信

ケーブルの空きを確認してから、やっとノードはデータを送信することができます。（Multiple Access：多重アクセス）

 

③コリジョン発生

何度もケーブル上の空きを確認しても、他のノードが同時に信号を送信してしまうことがあります。

その結果、コリジョンが発生します。

が、コリジョンが発生してもこの方式ではコリジョン検出ができません。

したがって、CSによって通信ができる状態かどうか判断ができた際、

ランダムな時間で待機してからデータを送信し、コリジョンを回避します。（Collision Avoidance：コリジョン回避）

◆AP
 

次はWLANを提供するデバイスについて、学びましょう。

WLANを提供するデバイスのことをAPと呼びます。

APの簡単な定義は、以下になります。

 

■AP（Access Point）

　WLANにおいて、無線を利用してデバイスと接続し、通信を提供する機器のことを指す

--APの種類--
APは主にその提供方法によって、2種類に分類することができます。

1つ1つ見ていきましょう。

 

①自律型AP

IOSが動作し、AP単独でWLANを提供できる

各APでそれぞれ設定・制御を行う
 
②集中管理型AP

AP自身は電波の送受信のみを行う

設定・制御については、WLC（WLANコントローラ）がまとめて行う

■WLC（Wireless LAN Controller）

　集中管理型のWLANにおいて使用されるデバイス

　複数台のAPを一元管理することができる

--物理ポートの役割--
物理ポートとは、実際にWLCに存在するポートのことです。

 

WLCには4つの物理ポートが存在します。

下の表で詳しく確認していきましょう。

 
①WEP（Wired Equivalent Privacy）
暗号化技術の中で最初に登場したもの

WEPキーという鍵を使って暗号化するものですが、同じパスワードを使いまわすので脆弱性があり、

パスワードを簡単に解読されてしまうため今ではほとんど使われていません。

◆セキュリティ

②WPA（Wi-Fi Protected Access）
WEPの脆弱性を改善する目的で登場したもの

TKIPという暗号化方式を使い、パスワードを使いまわすことがなくなりましたが、

あくまでWEPを改良しただけのものにはなるため、セキュリティがまだまだ万全な状態ではないものになります。

 

③WPA2
WPAでの脆弱性を全面的に改良する目的で登場したものです。

AESという暗号化方式を使って暗号化しています。

これがかなり優秀なもので、第三者によるデータの解読はほぼ不可能といわれています。

そのため、現在でも主流な規格となっていますが、近年ではWPA2においても脆弱性が発見されました。

 

④WPA3
2018年に登場した暗号化規格で、WPA2の脆弱性をカバーしたものです。

まだまだ主流ではありませんが、近年ではWPA3に対応したデバイスも出回り始めています。

--クライアント端末の認証--
次に認証について学習していきます。

認証は、第三者が正規クライアントを装って不正アクセスをしようとした際に、

正規のクライアントかどうかを識別するために必要になります。

アクセスポイントが接続を試みるユーザを認証することで不正アクセスを防いでいるのです。

では、順番に見ていきましょう。

 

①事前共有鍵認証（Pre-Shared Key認証）

事前共有鍵認証はPSK認証とも呼ばれていて、

アクセスポイントとクライアント端末全体にてあらかじめ設定しておいたパスフレーズを使用して認証を行うことです。

設定されたパスフレーズをもとに共通の鍵を生成し、これにより認証を行います。

つまり、この鍵を持っていれば誰でも認証出来てしまうため、セキュリティの強度が高いものとは言えません。

②IEEE802.1X認証
IEEE 802.1X認証はユーザがアクセスポイントに接続する前に、

ユーザIDとパスワードなどを利用して認証を行うことです。

認証用サーバに登録されている正規のユーザであれば社内ネットワークにアクセスでき、

登録されていないユーザであればブロックされます。
